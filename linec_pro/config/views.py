from django.shortcuts import render
from django.views import generic
from django.shortcuts import redirect
import re
from .forms import InquiryForm
import logging
from django.urls import reverse_lazy
from django.contrib import messages
# Create your views here.

logger= logging.getLogger(__name__)

class IndexView(generic.TemplateView):
    template_name = 'index.html'


class InquiryView(generic.FormView):
    template_name = "inquiry.html"
    form_class = InquiryForm
    success_url = reverse_lazy('config:inquiry')

    def form_valid(self, form):
        form.send_email()
        messages.success(self.request,'„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÈÄÅ‰ø°„Åó„Åæ„Åó„Åü')
        logger.info('Inquiry sent by {}'.format(form.cleaned_data['name']))
        return super().form_valid(form)


def AnswerView(request):
    buns = request.GET.get('bunsyou')
    if len(buns) <1:
        return redirect('config:index')

    emojis = "üôÇüòÄüòÉüòÑüòÅüòÜüòÖü§£üòÇüôÇüôÉüòâüòäüòáü•∞üòçü§©üòòüòó‚ò∫üòöüòôü•≤üòãüòõüòúü§™üòùü§ëü§óü§≠ü§´ü§îü§êü§®üòêüòëüò∂üòèüòíüôÑüò¨ü§•üòåüòîüò™ü§§üò¥üò∑ü§íü§ïü§¢ü§Æü§ßü•µü•∂ü•¥üòµü§Øü§†ü•≥ü•∏üòéü§ìüßêüòïüòüüôÅ‚òπüòÆüòØüò≤üò≥ü•∫üò¶üòßüò®üò∞üò•üò¢üò≠üò±üòñüò£üòûüòìüò©üò´ü•±üò§üò°üò†ü§¨üòàüëøüíÄ‚ò†üí©ü§°üëπüë∫üëªüëΩüëæü§ñüò∫üò∏üòπüòªüòºüòΩüôÄüòøüòæüôàüôâüôäüíãüíåüíòüíùüíñüíóüíìüíûüíïüíü‚ù£üíî‚ù§üß°üíõüíöüíôüíúü§éüñ§ü§çüíØüí¢üí•üí´üí¶üí®üï≥üí£üí¨üëÅ‚Äçüó®üëÅÔ∏è‚Äçüó®Ô∏èüó®üóØüí≠üí§üëãü§öüñê‚úãüññüëåü§åü§è‚úåü§ûü§üü§òü§ôüëàüëâüëÜüñïüëá‚òùüëçüëé‚úäüëäü§õü§úüëèüôåüëêü§≤ü§ùüôè‚úçüíÖü§≥üí™ü¶æü¶øü¶µü¶∂üëÇü¶ªüëÉüß†ü´Äü´Åü¶∑ü¶¥üëÄüëÅüëÖüëÑüêµüêíü¶çü¶ßüê∂üêïü¶Æüêï‚Äçü¶∫üê©üê∫ü¶äü¶ùüê±üêàüêà‚Äç‚¨õü¶ÅüêØüêÖüêÜüê¥üêéü¶Ñü¶ìü¶åü¶¨üêÆüêÇüêÉüêÑüê∑üêñüêóüêΩüêèüêëüêêüê™üê´ü¶ôü¶íüêòü¶£ü¶èü¶õüê≠üêÅüêÄüêπüê∞üêáüêøü¶´ü¶îü¶áüêªüêª‚Äç‚ùÑÔ∏èüê®üêºü¶•ü¶¶ü¶®ü¶òü¶°üêæü¶Éüêîüêìüê£üê§üê•üê¶üêßüïäü¶Öü¶Üü¶¢ü¶âü¶§ü™∂ü¶©ü¶öü¶úüê∏üêäüê¢ü¶éüêçüê≤üêâü¶ïü¶ñüê≥üêãüê¨ü¶≠üêüüê†üê°ü¶àüêôüêöüêåü¶ãüêõüêúüêùü™≤üêûü¶óü™≥üï∑üï∏ü¶Çü¶üü™∞ü™±ü¶†üíêüå∏üíÆüèµüåπü•Äüå∫üåªüåºüå∑üå±ü™¥üå≤üå≥üå¥üåµüåæüåø‚òòüçÄüçÅüçÇüçÉüçáüçàüçâüçäüçãüçåüççü•≠üçéüçèüçêüçëüçíüçìü´êü´ëü•ùüçÖü´íü••ü•ëüçÜü•îü•ïüåΩüå∂ü•íü•¶üßÑüßÖü•¨üçÑü•úüå∞üçûü•êü•ñü´ìü•®ü•Øü•ûüßáüßÄüçñüçóü•©ü•ìüçîüçüüçïüå≠ü•™üåÆüåØü´îü•ôüßÜü•öüç≥ü•òüç≤ü´ïü•£ü•óüçøüßàüßÇü•´üç±üçòüçôüçöüçõüçúüçùüç†üç¢üç£üç§üç•ü•Æüç°ü•üü•†ü•°ü¶Äü¶ûü¶êü¶ëü¶™üç¶üçßüç®üç©üç™üéÇüç∞üßÅü•ßüç´üç¨üç≠üçÆüçØüçºü•õ‚òïü´ñüçµüç∂üçæüç∑üç∏üçπüç∫üçªü•Çü•Éü•§üßãüßÉüßâüßäü•¢üçΩüç¥ü•Ñüî™üè∫üåçüåéüåèüåêüó∫üóæüß≠üèî‚õ∞üåãüóªüèïüèñüèúüèùüèûüèüüèõüèóüß±ü™®ü™µüõñüèòüèöüè†üè°üè¢üè£üè§üè•üè¶üè®üè©üè™üè´üè¨Óîäüè≠üèØüè∞üííüóºüóΩ‚õ™üïåüõïüïç‚õ©üïã‚õ≤‚õ∫üåÅüåÉüèôüåÑüåÖüåÜüåáüåâ‚ô®üé†üé°üé¢üíàüé™üöÇüöÉüöÑüöÖüöÜüöáüöàüöâüöäüöùüöûüöãüöåüöçüöéüöêüöëüöíüöìüöîüöïüöñüöóüöòüöôüõªüööüöõüöúüèéüèçüõµü¶Ωü¶ºüõ∫üö≤üõ¥üõπüõºüöèüõ£üõ§üõ¢‚õΩüö®üö•üö¶üößüõë‚öì‚õµüõ∂üö§üõ≥‚õ¥üõ•üö¢‚úàüõ©üõ´üõ¨ü™Çüí∫üöÅüöüüö†üö°üõ∞üöÄüõ∏üõéüß≥‚åõ‚è≥‚åö‚è∞‚è±‚è≤üï∞üïõüïßüïêüïúüïëüïùüïíüïûüïìüïüüïîüï†üïïüï°üïñüï¢üïóüï£üïòüï§üïôüï•üïöüï¶üåëüåíüåìüåîüåïüåñüåóüåòüåôüåöüåõüåúüå°‚òÄüåùüåûü™ê‚≠êüåüüå†üåå‚òÅ‚õÖ‚õàüå§üå•üå¶üåßüå®üå©üå™üå´üå¨üåÄüåàüåÇ‚òÇ‚òî‚õ±‚ö°‚ùÑ‚òÉ‚õÑ‚òÑüî•üíßüåäüéÉüéÑüéÜüéáüß®‚ú®üéàüéâüéäüéãüéçüééüéèüéêüéëüßßüéÄüéÅüéóüéüüé´üéñüèÜüèÖü•áü•àü•â‚öΩ‚öæü•éüèÄüèêüèàüèâüéæü•èüé≥üèèüèëüèíü•çüèìüè∏ü•äü•ãü•Ö‚õ≥‚õ∏üé£ü§øüéΩüéøüõ∑ü•åüéØü™Äü™Åüé±üîÆü™ÑüßøüéÆüïπüé∞üé≤üß©üß∏ü™Öü™Ü‚ô†‚ô•‚ô¶‚ô£‚ôüüÉèüÄÑüé¥üé≠üñºüé®üßµü™°üß∂ü™¢üëìüï∂ü•Ωü•ºü¶∫üëîüëïüëñüß£üß§üß•üß¶üëóüëòü•ªü©±ü©≤ü©≥üëôüëöüëõüëúüëùüõçüéíü©¥üëûüëüü•æü•øüë†üë°ü©∞üë¢üëëüëíüé©üéìüß¢ü™ñ‚õëüìøüíÑüíçüíéüîáüîàüîâüîäüì¢üì£üìØüîîüîïüéºüéµüé∂üéôüéöüéõüé§üéßüìªüé∑ü™óüé∏üéπüé∫üéªü™ïü•Åü™òüì±üì≤‚òéüìûüìüüì†üîãüîåüíªüñ•üñ®‚å®üñ±üñ≤üíΩüíæüíøüìÄüßÆüé•üéûüìΩüé¨üì∫üì∑üì∏üìπüìºüîçüîéüïØüí°üî¶üèÆü™îüìîüìïüìñüìóüìòüìôüìöüììüìíüìÉüìúüìÑüì∞üóûüìëüîñüè∑üí∞ü™ôüí¥üíµüí∂üí∑üí∏üí≥üßæüíπ‚úâüìßüì®üì©üì§üì•üì¶üì´üì™üì¨üì≠üìÆüó≥‚úè‚úíüñãüñäüñåüñçüìùüíºüìÅüìÇüóÇüìÖüìÜüóíüóìüìáüìàüìâüìäüìãüìåüìçüìéüñáüìèüìê‚úÇüóÉüóÑüóëüîíüîìüîèüîêüîëüóùüî®ü™ì‚õè‚öíüõ†üó°‚öîüî´ü™Éüèπüõ°ü™öüîßü™õüî©‚öôüóú‚öñü¶Øüîó‚õìü™ùüß∞üß≤ü™ú‚öóüß™üß´üß¨üî¨üî≠üì°üíâü©∏üíäü©πü©∫üö™üõóü™ûü™üüõèüõãü™ëüöΩü™†üöøüõÅü™§ü™íüß¥üß∑üßπüß∫üßªü™£üßºü™•üßΩüßØüõíüö¨‚ö∞ü™¶‚ö±üóøü™ßüèßüöÆüö∞‚ôøüöπüö∫üöªüöºüöæüõÇüõÉüõÑüõÖ‚ö†üö∏‚õîüö´üö≥üö≠üöØüö±üö∑üìµüîû‚ò¢‚ò£‚¨Ü‚Üó‚û°‚Üò‚¨á‚Üô‚¨Ö‚Üñ‚Üï‚Üî‚Ü©‚Ü™‚§¥‚§µüîÉüîÑüîôüîöüîõüîúüîùüõê‚öõüïâ‚ú°‚ò∏‚òØ‚úù‚ò¶‚ò™‚òÆüïéüîØ‚ôà‚ôâ‚ôä‚ôã‚ôå‚ôç‚ôé‚ôè‚ôê‚ôë‚ôí‚ôì‚õéüîÄüîÅüîÇ‚ñ∂‚è©‚è≠‚èØ‚óÄ‚è™‚èÆüîº‚è´üîΩ‚è¨‚è∏‚èπ‚è∫‚èèüé¶üîÖüîÜüì∂üì≥üì¥‚ôÄ‚ôÇ‚öß‚úñ‚ûï‚ûñ‚ûó‚ôæ‚Äº‚Åâ‚ùì‚ùî‚ùï‚ùó„Ä∞üí±üí≤‚öï‚ôª‚öúüî±üìõüî∞‚≠ï‚úÖ‚òë‚úî‚ùå‚ùé‚û∞‚ûø„ÄΩ‚ú≥‚ú¥‚ùá¬©¬Æüîüüî†üî°üî¢üî£üî§üÖ∞üÜéüÖ±üÜëüÜíüÜì‚ÑπüÜî‚ìÇüÜïüÜñüÖæüÜóüÖøüÜòüÜôüÜöüàÅüàÇüà∑üà∂üàØüâêüàπüàöüà≤üâëüà∏üà¥üà≥„äó„äôüà∫üàµüî¥üü†üü°üü¢üîµüü£üü§‚ö´‚ö™üü•üüßüü®üü©üü¶üü™üü´‚¨õ‚¨ú‚óº‚óª‚óæ‚óΩ‚ñ™‚ñ´üî∂üî∑üî∏üîπüî∫üîªüí†üîòüî≥üî≤üèÅüö©üéåüè¥üè≥üè≥Ô∏è‚Äçüåàüè≥Ô∏è‚Äç‚ößÔ∏èüè¥‚Äç‚ò†Ô∏èüë∂üßíüë¶üëßüßëüë±üë®üßîüë±‚Äç‚ôÇÔ∏èüë®‚Äçü¶∞üë®‚Äçü¶±üë®‚Äçü¶≥üë®‚Äçü¶≤üë©üë±‚Äç‚ôÄÔ∏èüë©‚Äçü¶∞üë©‚Äçü¶±üë©‚Äçü¶≥üë©‚Äçü¶≤üßìüë¥üëµüôçüôç‚Äç‚ôÇÔ∏èüôç‚Äç‚ôÄÔ∏èüôéüôé‚Äç‚ôÇÔ∏èüôé‚Äç‚ôÄÔ∏èüôÖüôÖ‚Äç‚ôÇÔ∏èüôÖ‚Äç‚ôÄÔ∏èüôÜüôÜ‚Äç‚ôÇÔ∏èüôÜ‚Äç‚ôÄÔ∏èüíÅüíÅ‚Äç‚ôÇÔ∏èüíÅ‚Äç‚ôÄÔ∏èüôãüôã‚Äç‚ôÇÔ∏èüôã‚Äç‚ôÄÔ∏èüßèüßè‚Äç‚ôÇÔ∏èüßè‚Äç‚ôÄÔ∏èüôáüôá‚Äç‚ôÇÔ∏èüôá‚Äç‚ôÄÔ∏èü§¶ü§¶‚Äç‚ôÇÔ∏èü§¶‚Äç‚ôÄÔ∏èü§∑ü§∑‚Äç‚ôÇÔ∏èü§∑‚Äç‚ôÄÔ∏èüßë‚Äç‚öïÔ∏èüë®‚Äç‚öïÔ∏èüë©‚Äç‚öïÔ∏èüßë‚Äçüéìüë®‚Äçüéìüë©‚Äçüéìüßë‚Äçüè´üë®‚Äçüè´üë©‚Äçüè´üßë‚Äç‚öñÔ∏èüë®‚Äç‚öñÔ∏èüë©‚Äç‚öñÔ∏èüßë‚Äçüåæüë®‚Äçüåæüë©‚Äçüåæüßë‚Äçüç≥üë®‚Äçüç≥üë©‚Äçüç≥üßë‚Äçüîßüë®‚Äçüîßüë©‚Äçüîßüßë‚Äçüè≠üë®‚Äçüè≠üë©‚Äçüè≠üßë‚Äçüíºüë®‚Äçüíºüë©‚Äçüíºüßë‚Äçüî¨üë®‚Äçüî¨üë©‚Äçüî¨üßë‚Äçüíªüë®‚Äçüíªüë©‚Äçüíªüßë‚Äçüé§üë®‚Äçüé§üë©‚Äçüé§üßë‚Äçüé®üë®‚Äçüé®üë©‚Äçüé®üßë‚Äç‚úàÔ∏èüë®‚Äç‚úàÔ∏èüë©‚Äç‚úàÔ∏èüßë‚ÄçüöÄüë®‚ÄçüöÄüë©‚ÄçüöÄüßë‚Äçüöíüë®‚Äçüöíüë©‚ÄçüöíüëÆüëÆ‚Äç‚ôÇÔ∏èüëÆ‚Äç‚ôÄÔ∏èüïµüïµÔ∏è‚Äç‚ôÇÔ∏èüïµÔ∏è‚Äç‚ôÄÔ∏èüíÇüíÇ‚Äç‚ôÇÔ∏èüíÇ‚Äç‚ôÄÔ∏èü•∑üë∑üë∑‚Äç‚ôÇÔ∏èüë∑‚Äç‚ôÄÔ∏èü§¥üë∏üë≥üë≥‚Äç‚ôÇÔ∏èüë≥‚Äç‚ôÄÔ∏èüë≤üßïü§µü§µ‚Äç‚ôÇÔ∏èü§µ‚Äç‚ôÄÔ∏èüë∞üë∞‚Äç‚ôÇÔ∏èüë∞‚Äç‚ôÄÔ∏èü§∞ü§±üë©‚Äçüçºüë®‚Äçüçºüßë‚ÄçüçºüëºüéÖü§∂üßë‚ÄçüéÑü¶∏ü¶∏‚Äç‚ôÇÔ∏èü¶∏‚Äç‚ôÄÔ∏èü¶πü¶π‚Äç‚ôÇÔ∏èü¶π‚Äç‚ôÄÔ∏èüßôüßô‚Äç‚ôÇÔ∏èüßô‚Äç‚ôÄÔ∏èüßöüßö‚Äç‚ôÇÔ∏èüßö‚Äç‚ôÄÔ∏èüßõüßõ‚Äç‚ôÇÔ∏èüßõ‚Äç‚ôÄÔ∏èüßúüßú‚Äç‚ôÇÔ∏èüßú‚Äç‚ôÄÔ∏èüßùüßù‚Äç‚ôÄÔ∏èüßù‚Äç‚ôÇÔ∏èüßûüßû‚Äç‚ôÇÔ∏èüßû‚Äç‚ôÄÔ∏èüßüüßü‚Äç‚ôÇÔ∏èüßü‚Äç‚ôÄÔ∏èüíÜüíÜ‚Äç‚ôÇÔ∏èüíÜ‚Äç‚ôÄÔ∏èüíáüíá‚Äç‚ôÇÔ∏èüíá‚Äç‚ôÄÔ∏èüö∂üö∂‚Äç‚ôÇÔ∏èüö∂‚Äç‚ôÄÔ∏èüßçüßç‚Äç‚ôÇÔ∏èüßç‚Äç‚ôÄÔ∏èüßéüßé‚Äç‚ôÇÔ∏èüßé‚Äç‚ôÄÔ∏èüßë‚Äçü¶Øüë®‚Äçü¶Øüë©‚Äçü¶Øüßë‚Äçü¶ºüë®‚Äçü¶ºüë©‚Äçü¶ºüßë‚Äçü¶Ωüë®‚Äçü¶Ωüë©‚Äçü¶ΩüèÉüèÉ‚Äç‚ôÇÔ∏èüèÉ‚Äç‚ôÄÔ∏èüíÉüï∫üï¥üëØüëØ‚Äç‚ôÇÔ∏èüëØ‚Äç‚ôÄÔ∏èüßñüßñ‚Äç‚ôÇÔ∏èüßñ‚Äç‚ôÄÔ∏èüßóüßó‚Äç‚ôÇÔ∏èüßó‚Äç‚ôÄÔ∏èü§∫üèá‚õ∑üèÇüèåüèåÔ∏è‚Äç‚ôÇÔ∏èüèåÔ∏è‚Äç‚ôÄÔ∏èüèÑüèÑ‚Äç‚ôÇÔ∏èüèÑ‚Äç‚ôÄÔ∏èüö£üö£‚Äç‚ôÇÔ∏èüö£‚Äç‚ôÄÔ∏èüèäüèä‚Äç‚ôÇÔ∏èüèä‚Äç‚ôÄÔ∏è‚õπ‚õπÔ∏è‚Äç‚ôÇÔ∏è‚õπÔ∏è‚Äç‚ôÄÔ∏èüèãüèãÔ∏è‚Äç‚ôÇÔ∏èüèãÔ∏è‚Äç‚ôÄÔ∏èüö¥üö¥‚Äç‚ôÇÔ∏èüö¥‚Äç‚ôÄÔ∏èüöµüöµ‚Äç‚ôÇÔ∏èüöµ‚Äç‚ôÄÔ∏èü§∏ü§∏‚Äç‚ôÇÔ∏èü§∏‚Äç‚ôÄÔ∏èü§ºü§º‚Äç‚ôÇÔ∏èü§º‚Äç‚ôÄÔ∏èü§Ωü§Ω‚Äç‚ôÇÔ∏èü§Ω‚Äç‚ôÄÔ∏èü§æü§æ‚Äç‚ôÇÔ∏èü§æ‚Äç‚ôÄÔ∏èü§πü§π‚Äç‚ôÇÔ∏èü§π‚Äç‚ôÄÔ∏èüßòüßò‚Äç‚ôÄÔ∏èüßò‚Äç‚ôÇÔ∏èüõÄüõåüßë‚Äçü§ù‚Äçüßëüë≠üë´üë¨üíèüë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë®üë®‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë®üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë©üíëüë©‚Äç‚ù§Ô∏è‚Äçüë®üë®‚Äç‚ù§Ô∏è‚Äçüë®üë©‚Äç‚ù§Ô∏è‚Äçüë©üë™üë®‚Äçüë©‚Äçüë¶üë®‚Äçüë©‚Äçüëßüë®‚Äçüë©‚Äçüëß‚Äçüë¶üë®‚Äçüë©‚Äçüë¶‚Äçüë¶üë®‚Äçüë©‚Äçüëß‚Äçüëßüë®‚Äçüë®‚Äçüë¶üë®‚Äçüë®‚Äçüëßüë®‚Äçüë®‚Äçüëß‚Äçüë¶üë®‚Äçüë®‚Äçüë¶‚Äçüë¶üë®‚Äçüë®‚Äçüëß‚Äçüëßüë©‚Äçüë©‚Äçüë¶üë©‚Äçüë©‚Äçüëßüë©‚Äçüë©‚Äçüëß‚Äçüë¶üë©‚Äçüë©‚Äçüë¶‚Äçüë¶üë©‚Äçüë©‚Äçüëß‚Äçüëßüë®‚Äçüë¶üë®‚Äçüë¶‚Äçüë¶üë®‚Äçüëßüë®‚Äçüëß‚Äçüë¶üë®‚Äçüëß‚Äçüëßüë©‚Äçüë¶üë©‚Äçüë¶‚Äçüë¶üë©‚Äçüëßüë©‚Äçüëß‚Äçüë¶üë©‚Äçüëß‚Äçüëßüó£üë§üë•ü´Çüë£"
    count1 = 0
    count2 = 0

    for bun in buns:
        for emoji in emojis:
            if bun == emoji:
                count1 += 1

    for i in buns:
        if '(' == i:
            count2 += 1


    sinbun = re.sub("\(.+?\)", "„ÅÇ", buns)

    wariai = (count1+count2)/len(sinbun)

    if wariai > 0.25:
        return render(request, 'answer.html')
    elif wariai > 0.10:
        return render(request, 'answer1.html')
    elif wariai > 0.08:
        return render(request, 'answer2.html')
    elif wariai > 0.06:
        return render(request, 'answer3.html')
    elif wariai > 0.04:
        return render(request, 'answer4.html')
    else:
        return render(request, 'answer5.html')